---
import BaseLayouts from '../../layouts/BaseLayouts.astro'
import BlogPost from '../../components/BlogPost.astro'

export async function getStaticPaths() {
  const allPosts = await Astro.glob('../posts/*.md')

  return [
    { params: { tag: 'Interaccion Digital' }, props: { posts: allPosts } },
    { params: { tag: 'Servicio al cliente' }, props: { posts: allPosts } },
    { params: { tag: 'Electronic Health Record' }, props: { posts: allPosts } },
    { params: { tag: 'EHR' }, props: { posts: allPosts } },
    {
      params: { tag: 'Registros Medicos Electronicos' },
      props: { posts: allPosts },
    },
    { params: { tag: 'RME' }, props: { posts: allPosts } },
    { params: { tag: 'IA' }, props: { posts: allPosts } },
    { params: { tag: 'Dictado Medico' }, props: { posts: allPosts } },
  ]
}

const { tag } = Astro.params

const { posts } = Astro.props

const filteredPosts = posts.filter((post) =>
  post.frontmatter.tags?.includes(tag)
)
---

<BaseLayouts pageTitle={tag}>
  <p>Entradas etiquetadas con {tag}</p>
  <ul>
    {
      filteredPosts.map((post) => (
        <BlogPost url={post.url} title={post.frontmatter.title} />
      ))
    }
  </ul>
</BaseLayouts>
